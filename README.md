# 2020_gkd_ImageProcessingProgramming

# 2020年国科大秋季图像处理与分析编程课后作业一


**本作业主要由五个文件构成，每个文件分别对应作业中的每一问。**

## Q1：黑白图像灰度扫描
### 1.问题描述
实现一个函数 s = scanLine4e(f, I, loc), 其中 f 是一个灰度图像， I 是一个整数， loc 是一个字
符串。当 loc 为’row’时， I 代表行数。当 loc 为’column’时， I 代表列数。输出 s 是对应的相
关行或者列的像素灰度矢量。

调用该函数，提取cameraman.tif 和 einstein.tif 的中心行和中心列的像素灰度矢量并将扫描
得到的灰度序列绘制成图。

### 2.文件描述
输入为三个参数，f:图像路径，I：提取图像的第I行或第I列，loc：‘row’或‘col’，指定提取行或列。

执行Q1.py文件后会产生图像第I行以及第I列像素灰度的折线图，并将结果保存到figures目录所在的文件夹下。

另外，如果图像路径不正确会产生提示信息“Image path is invalid, please input again!”如果图像索引超出范围
会提示信息“The pixel vector index is invalid, please input again!”如果loc参数不正确，会提示信息
“The loc parameter is invalid, please input again!”

## Q2：彩色图像转换为黑白图像
### 1.问题描述
图像处理中的一个常见问题是将彩色RGB图像转换为单色灰度图像，第一种常用的方法是取三个元素R，G，B的均值。第二种常用的方式，又称为 NTSC 标准，考虑了人类的彩色
感知体验，对于 R,G,B 三通道分别采用了不同的加权系数，分别是 R 通道 0.2989， G 通道
0.5870， B 通道 0.1140. 实现一个函数 g = rgb1gray(f, method). 函数功能是将一幅 24 位的RGB 图像, f, 转换成灰度图像, g. 参数 method 是一个字符串，当其值为’average’ 时， 采用第一种转换方法，当其值为’NTSC’时，采用第二种转换方法。 将’NTSC’做为缺省方式。

调用该函数，将提供的图像 mandril_color.tif 和 lena512color.tiff 用上述两种方法转换成单色灰度图像，对于两种方法的结果进行简短比较和讨论。

### 2.文件描述
输入为三个参数f, method(NTFC为缺省)以及showflag(默认为True)。其中f表示输入图像的路径，method为average时为计算三个通道均值模式；method为NTFC时，为采用不同加权系数加权后的灰度图；showflag为是否显示原图和生成的灰度图。

输出为生成的灰度图。执行Q2.py文件后会产生mandril和lena的两种形式的灰度图,并将结果保存到figures文件夹下。

另外，如果路径不正确会产生提示信息，参数不正确也会产生提示信息。

## Q.3：图像二维卷积函数
### 1.问题描述
实现一个函数 g = twodConv(f, w), 其中 f 是一个灰度源图像， w 是一个矩形卷积核。要求输
出图像 g 与源图像 f 大小（也就是像素的行数和列数）一致。请注意，为满足这一要求，对
于源图像f需要进行边界像素填补(padding)。这里请实现两种方案。第一种方案是像素复制，
对应的选项定义为’replicate’， 填补的像素拷贝与其最近的图像边界像素灰度。第二种方案是
补零，对应的选项定义为’zero’, 填补的像素灰度为 0. 将第二种方案设置为缺省选择。

### 2.文件描述
由两个函数构成，其中twodConv可以产生两种形式的padding并调用conv2d函数进行卷积运算，conv2d为2维卷积函数。twodConv函数的输入为2维图像矩阵f，kernel以及padding方式（默认为zero形式），输出为二维卷积后的图像。

直接运行Q3.py文件后，会输出卷积后的结果。

另外，如果输入的padding形式不正确，会提示重新输入。

## Q.4：归一化二维高斯滤波核函数
### 1.问题描述
实现一个高斯滤波核函数 w = gaussKernel(sig， m)， 其中 sig 对应于高斯函数定义中的σ , w的大小为 m×m。请注意，这里如果 m 没有提供，需要进行计算确定。如果 m 已提供但过小，
应给出警告信息提示。 w 要求归一化，即全部元素加起来和为 1。

### 2.文件描述
主要由一个产生高斯核的函数gaussKernel构成，输入为两个参数sig以及m（默认为0）。输出为高斯核。其中sig为高斯核函数的标准差，m为高斯核的大小。

直接运行Q4.py文件后，会输出在缺省kernel大小后标准差为1的高斯核。

另外，如果kernel大小小于3会有提示信息。

## Q.5: 灰度图像的高斯滤波
### 1.问题描述
调用上面实现的函数，对于问题 1 和 2 中的灰度图像cameraman, einstein, 以及 lena512color和 mandril_color 对应的 NTSC 转换后的灰度图像） 进行高斯滤波，采用σ =1， 2， 3， 5。 任
选一种像素填补方案。

对于σ =1 下的结果，与直接调用相关函数的结果进行比较（可以简单计算差值图像）。然后，任选两幅图像，比较其他参数条件不变的情况下像素复制和补零下滤波结果在边界上的差别。

### 2.文件描述
直接运行文件，会产生四幅图像在高斯核参数sig分别为1，2，3，5下的卷积图像。最后会产生本程序编写的高斯核和opencv产生的高斯核的对比的结果，输出两者的差值。
